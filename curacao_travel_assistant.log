2025-04-24 04:54:27,250 - curacao-assistant - INFO - Construyendo grafo del asistente turístico
2025-04-24 04:54:27,252 - curacao-assistant - ERROR - Error inesperado: 'StateGraph' object has no attribute 'set_entry_points'
2025-04-24 04:54:27,254 - curacao-assistant - ERROR - Traceback (most recent call last):
  File "/root/RAG-LLM/app/agent_tp3.py", line 538, in run_assistant
    result = await process_query(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/RAG-LLM/app/agent_tp3.py", line 461, in process_query
    GRAPH = build_graph()
            ^^^^^^^^^^^^^
  File "/root/RAG-LLM/app/agent_tp3.py", line 438, in build_graph
    builder.set_entry_points(["web_search", "rag"])
    ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'StateGraph' object has no attribute 'set_entry_points'. Did you mean: 'set_entry_point'?

2025-04-24 04:58:29,202 - curacao-assistant - INFO - Construyendo grafo del asistente turístico
2025-04-24 04:58:29,327 - curacao-assistant - INFO - Procesando consulta: 'hola'
2025-04-24 04:58:29,564 - curacao-assistant - INFO - Iniciando procesamiento de consulta
2025-04-24 04:58:29,598 - curacao-assistant - INFO - Iniciando búsqueda web con Tavily
2025-04-24 04:58:29,644 - curacao-assistant - INFO - Consultando información específica mediante RAG desde internet
2025-04-24 04:58:31,219 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 04:58:31,280 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría playas: module 'tavily' has no attribute 'search'
2025-04-24 04:58:31,281 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría buceo: module 'tavily' has no attribute 'search'
2025-04-24 04:58:31,281 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría alojamiento: module 'tavily' has no attribute 'search'
2025-04-24 04:58:31,282 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría transporte: module 'tavily' has no attribute 'search'
2025-04-24 04:58:31,282 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría clima: module 'tavily' has no attribute 'search'
2025-04-24 04:58:33,263 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 04:58:33,268 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 04:58:33,273 - curacao-assistant - ERROR - Error en búsqueda web: module 'tavily' has no attribute 'search'
2025-04-24 04:58:33,278 - curacao-assistant - INFO - Consulta RAG completada y sintetizada para categorías: ['playas', 'buceo', 'alojamiento', 'transporte', 'clima']
2025-04-24 04:58:33,281 - curacao-assistant - ERROR - Error procesando consulta: At key 'query': Can receive only one value per step. Use an Annotated key to handle multiple values.
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_CONCURRENT_GRAPH_UPDATE
2025-04-24 04:58:47,530 - curacao-assistant - INFO - Procesando consulta: 'puedes darme informacion de curazao'
2025-04-24 04:58:47,534 - curacao-assistant - INFO - Iniciando procesamiento de consulta
2025-04-24 04:58:47,535 - curacao-assistant - INFO - Iniciando búsqueda web con Tavily
2025-04-24 04:58:47,539 - curacao-assistant - INFO - Consultando información específica mediante RAG desde internet
2025-04-24 04:58:48,545 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 04:58:48,549 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría playas: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,552 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría atracciones: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,553 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría gastronomía: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,553 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría alojamiento: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,553 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría transporte: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,553 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría clima: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,553 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría buceo: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,553 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría cultura: module 'tavily' has no attribute 'search'
2025-04-24 04:58:48,553 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría excursiones: module 'tavily' has no attribute 'search'
2025-04-24 04:58:50,372 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 04:58:50,375 - curacao-assistant - ERROR - Error en búsqueda web: module 'tavily' has no attribute 'search'
2025-04-24 04:58:50,477 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 04:58:50,479 - curacao-assistant - INFO - Consulta RAG completada y sintetizada para categorías: ['playas', 'atracciones', 'gastronomía', 'alojamiento', 'transporte', 'clima', 'buceo', 'cultura', 'excursiones']
2025-04-24 04:58:50,480 - curacao-assistant - ERROR - Error procesando consulta: At key 'query': Can receive only one value per step. Use an Annotated key to handle multiple values.
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_CONCURRENT_GRAPH_UPDATE
2025-04-24 05:02:05,054 - curacao-assistant - INFO - Procesando consulta: '/quit'
2025-04-24 05:11:08,640 - curacao-assistant - INFO - Construyendo grafo del asistente turístico (secuencial)
2025-04-24 05:11:08,646 - curacao-assistant - INFO - Procesando consulta: 'hola'
2025-04-24 05:11:08,671 - curacao-assistant - INFO - Procesando consulta de forma secuencial
2025-04-24 05:11:08,672 - curacao-assistant - INFO - Iniciando búsqueda web con Tavily
2025-04-24 05:11:12,157 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:11:12,182 - curacao-assistant - ERROR - Error en búsqueda web: Object of type ellipsis is not JSON serializable
2025-04-24 05:11:12,183 - curacao-assistant - INFO - Consultando información específica mediante RAG desde internet
2025-04-24 05:11:12,886 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:11:12,891 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría playas: 'coroutine' object has no attribute 'get'
2025-04-24 05:11:12,895 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría buceo: 'coroutine' object has no attribute 'get'
2025-04-24 05:11:12,895 - curacao-assistant - ERROR - Error en búsqueda RAG para categoría cultura: 'coroutine' object has no attribute 'get'
2025-04-24 05:11:15,131 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:11:15,134 - curacao-assistant - INFO - Consulta RAG completada y sintetizada para categorías: ['playas', 'buceo', 'cultura']
2025-04-24 05:11:15,136 - curacao-assistant - INFO - Generando plan de itinerario personalizado
2025-04-24 05:11:21,394 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:11:39,145 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:11:39,152 - curacao-assistant - INFO - Plan de itinerario generado exitosamente
2025-04-24 05:11:39,153 - curacao-assistant - INFO - Coordinando respuesta final
2025-04-24 05:11:55,348 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:11:55,353 - curacao-assistant - INFO - Respuesta final generada exitosamente
2025-04-24 05:11:55,355 - curacao-assistant - INFO - Consulta procesada exitosamente en 46.71 segundos
2025-04-24 05:12:47,846 - curacao-assistant - INFO - Procesando consulta: '/Quit'
2025-04-24 05:32:11,649 - curacao-assistant - INFO - Poblando información semilla sobre Curazao...
2025-04-24 05:32:31,905 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:33:02,118 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:33:22,034 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:33:42,963 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:34:06,418 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:34:29,747 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:34:55,865 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:35:15,984 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:35:44,781 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:35:44,787 - curacao-assistant - INFO - Memoria guardada correctamente en curacao_knowledge.json
2025-04-24 05:35:44,787 - curacao-assistant - INFO - Se han añadido 9 categorías de información sobre Curazao
2025-04-24 05:35:59,030 - curacao-assistant - INFO - Construyendo grafo del asistente turístico con sistema de decisión inteligente
2025-04-24 05:35:59,060 - curacao-assistant - INFO - Procesando consulta: 'hola'
2025-04-24 05:35:59,090 - curacao-assistant - INFO - Clasificando tipo de consulta
2025-04-24 05:35:59,863 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:35:59,867 - curacao-assistant - INFO - Consulta clasificada como: conversacional, agentes activados: {'conversational_agent'}
2025-04-24 05:35:59,870 - curacao-assistant - INFO - Ejecutando agente conversacional
2025-04-24 05:36:01,901 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:36:01,905 - curacao-assistant - INFO - Consulta procesada exitosamente en 2.84 segundos
2025-04-24 05:36:31,077 - curacao-assistant - INFO - Procesando consulta: 'me puedes dar reocmendacion de curazao'
2025-04-24 05:36:31,079 - curacao-assistant - INFO - Clasificando tipo de consulta
2025-04-24 05:36:31,585 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:36:31,590 - curacao-assistant - INFO - Consulta clasificada como: informacion, agentes activados: {'web_search_agent', 'conversational_agent', 'rag_agent'}
2025-04-24 05:36:31,592 - curacao-assistant - INFO - Consultando información mediante memoria
2025-04-24 05:36:31,592 - curacao-assistant - INFO - Consulta RAG completada
2025-04-24 05:36:31,596 - curacao-assistant - INFO - Iniciando búsqueda web
2025-04-24 05:36:51,692 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:37:04,270 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 05:37:04,281 - curacao-assistant - INFO - Búsqueda web completada
2025-04-24 05:37:04,288 - curacao-assistant - INFO - Ejecutando agente conversacional
2025-04-24 05:37:04,289 - curacao-assistant - INFO - Consulta procesada exitosamente en 33.21 segundos
2025-04-24 06:00:48,179 - curacao-assistant - INFO - Procesando consulta: '/QUIT'
2025-04-24 06:00:48,186 - curacao-assistant - INFO - Clasificando tipo de consulta
2025-04-24 06:00:49,034 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:00:49,036 - curacao-assistant - INFO - Consulta clasificada como: conversacional, agentes activados: {'conversational_agent'}
2025-04-24 06:00:49,041 - curacao-assistant - INFO - Ejecutando agente conversacional
2025-04-24 06:00:50,496 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:00:50,500 - curacao-assistant - INFO - Consulta procesada exitosamente en 2.32 segundos
2025-04-24 06:01:18,989 - curacao-assistant - INFO - Conectando a la base de datos PostgreSQL...
2025-04-24 06:01:18,991 - curacao-assistant - ERROR - Error inicializando memoria vectorial: could not translate host name "postgres" to address: Temporary failure in name resolution

2025-04-24 06:01:22,181 - curacao-assistant - INFO - Conectando a la base de datos PostgreSQL...
2025-04-24 06:01:22,183 - curacao-assistant - ERROR - Error inicializando memoria vectorial: could not translate host name "postgres" to address: Temporary failure in name resolution

2025-04-24 06:01:22,184 - curacao-assistant - ERROR - Error inicializando servicio de memoria vectorial: could not translate host name "postgres" to address: Temporary failure in name resolution

2025-04-24 06:19:42,839 - curacao-assistant - INFO - Conectando a la base de datos PostgreSQL...
2025-04-24 06:19:42,841 - curacao-assistant - ERROR - Error inicializando memoria vectorial: could not translate host name "postgres" to address: Temporary failure in name resolution

2025-04-24 06:19:42,842 - curacao-assistant - ERROR - Error inicializando servicio de memoria vectorial: could not translate host name "postgres" to address: Temporary failure in name resolution

2025-04-24 06:19:51,925 - curacao-assistant - INFO - Inicializando modo fallback con datos básicos sobre Curazao
2025-04-24 06:19:51,925 - curacao-assistant - INFO - Generando datos de fallback para: playas
2025-04-24 06:20:17,859 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:20:17,867 - curacao-assistant - INFO - Generando datos de fallback para: atracciones_turisticas
2025-04-24 06:20:37,880 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:20:37,888 - curacao-assistant - INFO - Generando datos de fallback para: gastronomia
2025-04-24 06:20:55,759 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:20:55,763 - curacao-assistant - INFO - Generando datos de fallback para: alojamiento
2025-04-24 06:21:19,454 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:21:19,457 - curacao-assistant - INFO - Generando datos de fallback para: historia
2025-04-24 06:21:43,760 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:21:43,765 - curacao-assistant - INFO - Generando datos de fallback para: cultura
2025-04-24 06:21:59,861 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:21:59,866 - curacao-assistant - INFO - Generando datos de fallback para: transporte
2025-04-24 06:22:21,200 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:22:21,207 - curacao-assistant - INFO - Generando datos de fallback para: clima
2025-04-24 06:22:40,319 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:22:40,324 - curacao-assistant - INFO - Generando datos de fallback para: actividades
2025-04-24 06:22:55,017 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:22:55,024 - curacao-assistant - INFO - Modo fallback inicializado con 9 categorías
2025-04-24 06:25:38,427 - curacao-assistant - INFO - Intentando conectar a PostgreSQL en host: postgres...
2025-04-24 06:25:38,429 - curacao-assistant - WARNING - No se pudo conectar a PostgreSQL en postgres: could not translate host name "postgres" to address: Temporary failure in name resolution

2025-04-24 06:25:38,430 - curacao-assistant - INFO - Intentando conectar a PostgreSQL en host: localhost...
2025-04-24 06:25:38,439 - curacao-assistant - WARNING - No se pudo conectar a PostgreSQL en localhost: connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "airflow"

2025-04-24 06:25:38,440 - curacao-assistant - INFO - Intentando conectar a PostgreSQL en host: 127.0.0.1...
2025-04-24 06:25:38,454 - curacao-assistant - WARNING - No se pudo conectar a PostgreSQL en 127.0.0.1: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "airflow"

2025-04-24 06:25:38,457 - curacao-assistant - WARNING - No se pudo conectar a ninguna instancia de PostgreSQL. Activando modo fallback.
2025-04-24 06:25:38,457 - curacao-assistant - INFO - Inicializando modo fallback con datos básicos sobre Curazao
2025-04-24 06:25:38,457 - curacao-assistant - INFO - Generando datos de fallback para: playas
2025-04-24 06:25:48,628 - curacao-assistant - INFO - Inicializando modo fallback con datos básicos sobre Curazao
2025-04-24 06:25:48,628 - curacao-assistant - INFO - Generando datos de fallback para: playas
2025-04-24 06:26:06,362 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:26:06,372 - curacao-assistant - INFO - Generando datos de fallback para: atracciones_turisticas
2025-04-24 06:26:28,558 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:26:28,565 - curacao-assistant - INFO - Generando datos de fallback para: gastronomia
2025-04-24 06:26:51,198 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:26:51,202 - curacao-assistant - INFO - Generando datos de fallback para: alojamiento
2025-04-24 06:27:07,516 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:27:07,520 - curacao-assistant - INFO - Generando datos de fallback para: historia
2025-04-24 06:27:26,947 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:27:26,951 - curacao-assistant - INFO - Generando datos de fallback para: cultura
2025-04-24 06:27:46,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:27:46,755 - curacao-assistant - INFO - Generando datos de fallback para: transporte
2025-04-24 06:28:08,518 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:28:08,529 - curacao-assistant - INFO - Generando datos de fallback para: clima
2025-04-24 06:28:26,348 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:28:26,356 - curacao-assistant - INFO - Generando datos de fallback para: actividades
2025-04-24 06:28:45,263 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-24 06:28:45,271 - curacao-assistant - INFO - Modo fallback inicializado con 9 categorías
